# this creates the new image to build
puppet_run_type: apply
nodes:
  - keystone:
      create:
        options:
          keyname: dans_keys
          # EBS backed 32 bit oneiric in us-west-2
          image: ami-e434b9d4
          region: us-west-2
          type: m1.small
          group: accessible
      install:
        install_puppet: false
        git_repos:
          git@github.com:bodepd/puppetlabs-keystone: /etc/puppet/modules/keystone
          git://github.com/puppetlabs/puppet-apt: /etc/puppet/modules/apt
          git://github.com/puppetlabs/puppetlabs-mysql: /etc/puppet/modules/mysql
          git://github.com/puppetlabs/puppetlabs-stdlib: /etc/puppet/modules/stdlib
        git_checkout:
          /etc/puppet/modules/keystone: dev
        #manifest: /etc/puppet/modules/nova/examples/site.pp
        options:
          keyfile: ~/.ssh/dans_keys.pem
          login: ubuntu
